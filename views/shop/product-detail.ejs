<%- include('../layouts/head.ejs') %>
<script type="text/javascript" src="../../utilities/slideshow.js"> </script>
<link rel="stylesheet" href="/style/product.css">
<%- include('../layouts/nav.ejs') %>
<main class="centered">
    <h1> <%= product.title %> </h1>
    <hr>
    <div class = "slideshow_container">
                <div class="detail_product_image fade">
                  <div class="numbertext">1 / 3</div>
                  <img src="<%= product.imageURL %>" alt="<%= product.title %>">
                </div>
                <div class="detail_product_image fade">
                  <div class="numbertext">2 / 3</div>
                  <img src="<%= product.imageURL2 %>" alt="<%= product.title %>">
                </div>
                <div class="detail_product_image fade">
                  <div class="numbertext">3 / 3</div>
                  <img src="<%= product.imageURL3 %>" alt="<%= product.title %>">
                </div>
                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>     
    <div style="text-align:center">
      <span class="dot" onclick="currentSlide(1)"></span>
      <span class="dot" onclick="currentSlide(2)"></span>
      <span class="dot" onclick="currentSlide(3)"></span>
    </div>

        <h2> Rs. <%= product.price %> </h2>
        <p> <%= product.description %> </p>
        <% if(isAuthenticated) { %>
        <div class="card_actions">
          <%- include('../layouts/add-to-cart.ejs', {product:product}) %>
        </div>
        <% } %>
</main>
<script>
      var slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
          showSlides(slideIndex += n);
        }

        function currentSlide(n) {
          showSlides(slideIndex = n);
        }

        function showSlides(n) {
          var i;
          var slides = document.getElementsByClassName("detail_product_image");
          var dots = document.getElementsByClassName("dot");
          if (n > slides.length) { slideIndex = 1 }
          if (n < 1) { slideIndex = slides.length }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex - 1].style.display = "block";
          dots[slideIndex - 1].className += " active";
        }

</script>
<%- include('../layouts/foot.ejs') %>